{% extends "base/base.html" %}

{% load static %}

{% block external %}
<link rel="stylesheet" href="{% static 'tarjetas/tarjetas.css' %}">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap">
{% endblock %}

{% block title %}Sus tarjetas{% endblock %}

{% block content %}
<div class="flex flex-col gap-10">
  <h2 class="text-4xl font-bold">Tarjetas de debito</h2>

  {% if not tarjetas_debito %}
    <p>Actualmente no posee ninguna tarjeta de debito.</p>
  {% endif %}

  <div class="card-grid">

    {% for tarjeta in tarjetas_debito %}
      <div class="card-container">
        <div class="card-inner">

          <div class="card-front">
            <div class="card-row h-1/5">
              <div class="h-full flex items-center gap-3">
                {% if tarjeta.marca.codigo == "MASTER" %}
                  <img src="{% static 'tarjetas/master.png' %}" class="h-full" />
                  <span class="text-lg font-medium">{{ tarjeta.marca.nombre }}</span>
                {% elif tarjeta.marca.codigo == "VISA" %}
                  <img src="{% static 'tarjetas/visa.png' %}" class="h-3/4" />
                {% else %}
                  <img src="{% static 'tarjetas/amex.png' %}" class="h-full" />
                  <span class="text-lg font-medium">{{ tarjeta.marca.nombre }}</span>
                {% endif %}
              </div>

              <img src="{% static 'tarjetas/chip.png' %}" class="h-3/4" />
            </div>

            <div>
              <p class="card-row text-xs">Numero</p>
              <p class="card-row text-2xl">{{ tarjeta.numero }}</p>
            </div>

            <div>
              <div class="card-row text-xs">
                <p>Propietario</p>
                <p>Valido hasta</p>
              </div>

              <div class="card-row text-xl">
                <p>{{ user.first_name }} {{ user.last_name }}</p>
                <p>{{ tarjeta.fecha_expiracion|date:"m / Y" }}</p>
              </div>
            </div>
          </div>

          <div class="card-back">
            <div class="bg-[#222] mx-[-30px] h-[50px] mt-1"></div>

            <div class="card-row w-full h-1/5">
              <img src="{% static 'tarjetas/pattern.png' %}" class="h-full">
              <span class="h-5/6 flex flex-1 justify-center items-center bg-white text-black text-xl">{{ tarjeta.cvv }}</span>
            </div>

            <div class="card-row h-1/5">
              <img src="{% static 'base/white_logo_title.webp' %}" class="h-full">

              {% if tarjeta.marca.codigo == "MASTER" %}
                <img src="{% static 'tarjetas/master.png' %}" class="h-full" />
              {% elif tarjeta.marca.codigo == "VISA" %}
                <img src="{% static 'tarjetas/visa.png' %}" class="h-3/4" />
              {% else %}
                <img src="{% static 'tarjetas/amex.png' %}" class="h-full" />
              {% endif %}
            </div>
          </div>

        </div>
      </div>
    {% endfor %}

  </div>

  <h2 class="text-4xl font-bold">Tarjetas de credito</h2>

  {% if not tarjetas_credito %}
    <p>Actualmente no posee ninguna tarjeta de credito.</p>
  {% endif %}

  <div class="card-grid">

    {% for tarjeta in tarjetas_credito %}
      <div class="card-container">
        <div class="card-inner">

          <div class="card-front">
            <div class="card-row h-1/5">
              <div class="h-full flex items-center gap-3">
                {% if tarjeta.marca.codigo == "MASTER" %}
                  <img src="{% static 'tarjetas/master.png' %}" class="h-full" />
                  <span class="text-lg font-medium">{{ tarjeta.marca.nombre }}</span>
                {% elif tarjeta.marca.codigo == "VISA" %}
                  <img src="{% static 'tarjetas/visa.png' %}" class="h-3/4" />
                {% else %}
                  <img src="{% static 'tarjetas/amex.png' %}" class="h-full" />
                  <span class="text-lg font-medium">{{ tarjeta.marca.nombre }}</span>
                {% endif %}
              </div>

              <img src="{% static 'tarjetas/chip.png' %}" class="h-3/4" />
            </div>

            <div>
              <p class="card-row text-xs">Numero</p>
              <p class="card-row text-2xl">{{ tarjeta.numero }}</p>
            </div>

            <div>
              <div class="card-row text-xs">
                <p>Propietario</p>
                <p>Valido hasta</p>
              </div>

              <div class="card-row text-xl">
                <p>{{ user.first_name }} {{ user.last_name }}</p>
                <p>{{ tarjeta.fecha_expiracion|date:"m / Y" }}</p>
              </div>
            </div>
          </div>

          <div class="card-back">
            <div class="bg-[#222] mx-[-30px] h-[50px] mt-1"></div>

            <div class="card-row w-full h-1/5">
              <img src="{% static 'tarjetas/pattern.png' %}" class="h-full">
              <span class="h-5/6 flex flex-1 justify-center items-center bg-white text-black text-xl">{{ tarjeta.cvv }}</span>
            </div>

            <div class="card-row h-1/5">
              <img src="{% static 'base/white_logo_title.webp' %}" class="h-full">

              {% if tarjeta.marca.codigo == "MASTER" %}
                <img src="{% static 'tarjetas/master.png' %}" class="h-full" />
              {% elif tarjeta.marca.codigo == "VISA" %}
                <img src="{% static 'tarjetas/visa.png' %}" class="h-3/4" />
              {% else %}
                <img src="{% static 'tarjetas/amex.png' %}" class="h-full" />
              {% endif %}
            </div>
          </div>

        </div>
      </div>
    {% endfor %}

  </div>
</div>
{% endblock %}
